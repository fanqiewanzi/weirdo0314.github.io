<!DOCTYPE html>
<html lang="en-us" >

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Hugo 0.101.0" />
    
    <link rel="canonical" href="https://weirdo0314.github.io/content/go/go-string/" />
    <meta name="description" content="">
    

    <title>Go-String &middot; Bazinga Blog Site</title>

    <link rel="shortcut icon" href="https://weirdo0314.github.io/images/favicon.ico" />

    <link rel="stylesheet" href="https://weirdo0314.github.io/css/main.css" />
    
    
    
</head>


<body class="loading -mode">
    
<div class="top">
    <img class="logo" src="https://weirdo0314.github.io/images/logo.svg" alt="logo" />
</div>
<div class="bottom">
    <img class="logo" src="https://weirdo0314.github.io/images/logo.svg" alt="logo" />
</div>

    <header class="header">
    <ul class="menu clearfix control">
        

<li class="logo-container logo-default">
    <a href="https://weirdo0314.github.io/" class="btn logo-link">
        <img class="logo" src="https://weirdo0314.github.io/images/logo.svg" alt="logo" />
    </a>
</li>

        
        
    </ul>
</header>

    <div class="middle">
        <nav class="sidebar">
            <ul class="posts control">
    
    <li><a class="no-break btn" href='/content/go/go-string/'><i class="icon icon-post"></i>Go-String</a></li>
    
    <li><a class="no-break btn" href='/content/about/'><i class="icon icon-post"></i>About</a></li>
    
    <li><a class="no-break btn" href='/content/common/rpc%E7%AE%80%E4%BB%8B%E5%8F%8A%E5%85%B3%E9%94%AE%E6%8C%87%E6%A0%87/'><i class="icon icon-post"></i>RPC简介及关键指标</a></li>
    
    <li><a class="no-break btn" href='/content/go/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E4%B8%8E%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6/'><i class="icon icon-post"></i>Go-内存分配与内存回收</a></li>
    
    <li><a class="no-break btn" href='/content/go/go%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83/'><i class="icon icon-post"></i>Go-代码规范</a></li>
    
    <li><a class="no-break btn" href='/content/go/go-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%8F%8A%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95/'><i class="icon icon-post"></i>Go-并发控制、单元测试及基准测试</a></li>
    
</ul>

        </nav>
        <main class="main">
            <article class="article">
    <h2 class="title"><a href='/content/go/go-string/' class="btn">Go-String</a></h2>
    <div class="article-meta clearfix">
        <ul class="dates clearfix left control">
            <li><i class="icon icon-date"></i></li>
            <li class="publish-date">
                <time datetime="2022.07.15">2022.07.15</time>
            </li>
        </ul>
        
        
    </div>
    <div class="content">
        
        <p>Go语法中string在底层的存储，Go的默认编码为UTF-8</p>
<!-- raw HTML omitted -->
<p>来源：</p>
<p><a href="https://www.bilibili.com/video/BV1hv411x7we?p=1">幼麟实验室-Golang合集-string</a></p>
<h3 id="1-计算机组成原理基础">1. 计算机组成原理基础</h3>
<ul>
<li>
<p>一个比特(bit)可以为0或1</p>
</li>
<li>
<p>八个比特组成一个字节</p>
</li>
<li>
<p>一个字节可以表示256个数字</p>
</li>
<li>
<p>字符存储时将字符映射为一个数字来表示字符，这样就可以将字符转化为相应的二进制</p>
</li>
<li>
<p>汉字由两个字节表示，存储为二进制时会遇到字符界限划分的问题</p>
</li>
<li>
<p>在定长编码中所有字符标识为二进制都是一个长度，会产生浪费内存的情况</p>
</li>
<li>
<p>在变长编码中，如UTF-8编码中</p>
<ul>
<li>
<table>
<thead>
<tr>
<th>编号</th>
<th>编码模板</th>
</tr>
</thead>
<tbody>
<tr>
<td>0，127</td>
<td>0???????</td>
</tr>
<tr>
<td>128，2047</td>
<td>110????? 10??????</td>
</tr>
<tr>
<td>2048，65535</td>
<td>1110???? 10?????? 10??????</td>
</tr>
</tbody>
</table>
</li>
<li>
<table>
<thead>
<tr>
<th>字符</th>
<th>十进制</th>
<th>编码</th>
<th>实际二进制</th>
</tr>
</thead>
<tbody>
<tr>
<td>e</td>
<td>101</td>
<td>01100101</td>
<td>01100101</td>
</tr>
<tr>
<td>世</td>
<td>19990</td>
<td>11100100 10111000 10010110</td>
<td>01001110 00010110</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>将<strong>界</strong>转换编码</p>
<ul>
<li>十进制为：30028，二进制为：01110101 01001100</li>
<li>在第三个区间中，使用第三个模板</li>
<li>分别将四位、六位、六位二进制填入编码模板中</li>
<li>得到<strong>界</strong>字的UTF-8编码：11100111 10010101 10001100</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Go语言中使用的默认编码格式为UTF-8编码</p>
</blockquote>
<h3 id="2-字符串类型变量string">2. 字符串类型变量string</h3>
<ul>
<li>
<p>变量指向字符串的首部地址</p>
</li>
<li>
<blockquote>
<p>C语言采用&rsquo;\0&rsquo;标识符表示字符串结尾</p>
</blockquote>
</li>
<li>
<p>Go中字符串的结构由两部分组成 &lt;指向字符串首部的地址，字符串所占<strong>字节个数</strong>&gt;
<img src="https://weirdo0314.github.io//post-images/1638611155319.png" alt=""></p>
</li>
<li>
<p><strong>Go语言中字符串不能被修改</strong>，s1这样的字符串内容分配到的是只读内存段</p>
</li>
<li>
<p>重新赋值只是将字符串首部的地址进行了修改，并没有修改原本指针指向的内存</p>
</li>
<li>
<p>可将原本字符串强制转换为slice，这样会对slice重新分配内存并拷贝原来的字符串</p>
</li>
<li>
<p>字面量（静态变量）的string无法修改，非字面的string unsafe转为[]byte后可以修改</p>
</li>
</ul>

        
    </div>

</article>
<section class="comment">
    <p class="local-info">
        Comment is disabled to avoid unwanted discussions from 'localhost:1313' on your Disqus
        account...
    </p>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">

    (function () {
        if (window.location.hostname == "localhost") {
            return
        }
        document.querySelector('.local-info').classList.add('hide')

        let dsq = document.createElement('script')
        dsq.type = 'text/javascript'
        dsq.async = true
        let disqus_shortname = ''
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
    })()
</script>


        </main>
    </div>
    <footer class="footer clearfix">
    <ul class="control social clearfix">
        <li><a class="author btn" href="#"></a></li>
        
        <li>
            <a class="icon-link btn" href="https://weirdo0314.github.io/index.xml" type="application/rss+xml" title="rss">
                <i class="rss icon"></i></a>
        </li>
    </ul>

    <ul class="control status clearfix">
        <li><a href="#" class="btn">Posts:
                0</a>
        </li>
        <li><a href="#" class="btn">Pages:
                0</a></li>
        <li><a href="#" class="btn">en</a></li>
        <li><a href="https://gohugo.io" class="btn">Hugo: 0.101.0</a></li>
        <li><a href="https://github.com/sfengyuan/edidor" class="btn">Theme: Edidor</a></li>
        <li>
            
                <a href="#" class="btn">Last build: <time
                    datetime="2022-06-16T07:09:16Z">2022-06-16T07:09:16Z</time>
                </a>
            
        </li>
    </ul>
</footer>
<div class="dialog">
    <div class="wrapper">
        <div class="clearfix"><button class="btn close-dialog">X</button></div>
        <header>
            <h1 class="title">Theme Name</h1>
        </header>
        <main>
            <div class="clearfix">
                <label for="theme-name">
                    <p>Only English Character, space, hyphen are allowed!</p>
                    <p>Valid name examples: "custom", "fantastic theme", "my-theme"</p>
                    <p>Invalid name examles: "我的主题", ":)", "123"</p>
                </label>
                <input type="text" name="theme-name" id="theme-name">
            </div>
            <div class="clearfix">
                <button class="btn export">Export</button>
            </div>

        </main>
        <footer></footer>
    </div>
</div>

    <script src="https://weirdo0314.github.io/js/main.js"></script>


</body>

</html>
